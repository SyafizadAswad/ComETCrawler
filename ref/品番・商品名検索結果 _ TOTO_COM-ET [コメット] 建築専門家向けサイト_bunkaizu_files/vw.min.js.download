/* vim: set tabstop=2 shiftwidth=2 foldmethod=marker: */
/**
 * 
 * VirtuaWave Common JavaScript on jQuery ver.20090611
 *
 * @author      Shogo Kawase <shogo@arcstyle.jp>
 * @copyright   Arc Style Inc.
 * @version     CVS: $Id$
 *
 */
var vw={_debug:false,emptyFunction:function(){},include:function(a,c){var b='<script type="text/javascript" src="'+a+'"><\/script>';c?$(c).append(b):document.write(b)},css:function(a){document.write('<link rel="stylesheet" type="text/css" href="'+a+'" />')},extend:function(){var c,a=$A(arguments),d=a.shift();for(var b=0;b<a.length;++b){for(c in a[b]){d[c]=a[b][c]}}return d}};$$=function(a){return(typeof(a)=="string")?document.getElementById(a):a};$F=function(a){return $(a).val()};$A=function(c){if(!c){return[]}var b=c.length||0,a=new Array(b);while(b--){a[b]=c[b]}return a};vw.jsClass={create:function(){var d=null;if(typeof(arguments[0])=="function"){d=arguments.shift()}function a(){this.initialize.apply(this,arguments)}if(d){var b=function(){};b.prototype=d.prototype;a.prototype=new b}for(var c=0;c<arguments.length;c++){a.prototype=vw.extend(a.prototype,arguments[c])}if(!a.prototype.initialize){a.prototype.initialize=vw.emptyFunction}a.prototype.constructor=a;return a}};vw.window={scrollOffset:function(){return{x:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,y:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},scrollSize:function(){return{x:document.documentElement.scrollWidth||document.body.scrollWidth||0,y:document.documentElement.scrollHeight||document.body.scrollHeight||0}},clientSize:function(){return{x:document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth||0,y:document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight||0}},offsetSize:function(){return{x:document.documentElement.offsetWidth||document.body.offsetWidth||0,y:document.documentElement.offsetHeight||document.body.offsetHeight||0}}};vw.userAgent={version:0,msie:false,msie7:false,opera:false,safari:false,konqueror:false,khtml:false,gecko:false,firefox:false,mozilla:false,detect:function(){var a=navigator.userAgent.toLowerCase();if(window.opera){this.opera=true}else{if(a.indexOf("msie")!=-1){this.msie=true;if(document.documentMode){this.msie7=true;this.version=document.documentMode}else{if(document.compatMode&&(document.compatMode=="CSS1Compat")){this.msie7=true;this.version=7}else{if(document.implementation){this.version=6}else{this.version=5}}}}else{if(a.indexOf("applewebkit/")!=-1){this.khtml=this.safari=true}else{if(a.indexOf("konqueror/")!=-1){this.khtml=this.konqueror=true}else{if(a.indexOf("khtml/")!=-1){this.khtml=true}else{if(a.indexOf("firefox/")!=-1){this.gecko=this.mozilla=this.firefox=true}else{if(a.indexOf("gecko/")!=-1){this.gecko=this.mozilla=true}else{if(a.indexOf("mozilla/")!=-1){this.mozilla=true}}}}}}}}},toString:function(){return navigator.userAgent}};vw.userAgent.detect();vw.browser=vw.userAgent;vw.cookie={get:function(c){var e=" "+document.cookie+";";var d="";var b=e.length;var a,g,f;a=g=f=0;while(a<b){g=e.indexOf(";",a);d=e.substring(a+1,g);f=d.indexOf("=");if(decodeURIComponent(d.substring(0,f))==c){return decodeURIComponent(d.substring(f+1,g-a-1))}a=g+1}return null},set:function(c,f,a,e,h,g){var d=[encodeURIComponent(c)+"="+encodeURIComponent(f)];if(typeof(a)!="undefined"){var b=new Date();a=new Date(b.getTime()+(a-0));d.push("expires="+a.toGMTString())}if(typeof(e)!="undefined"){d.push("domain="+e)}if(typeof(h)!="undefined"){d.push("path="+h)}if(g){d.push("secure")}document.cookie=d.join(";")+";";return null},remove:function(b,d,g,f){var c=[encodeURIComponent(b)+"="];if(typeof(a)!="undefined"){var e=new Date();var a=new Date(e.getTime()-8640000);c.push("expires="+a.toGMTString())}if(typeof(d)!="undefined"){c.push("domain="+d)}if(typeof(g)!="undefined"){c.push("path="+g)}if(f){c.push("secure")}document.cookie=c.join(";")+";";return null},checkEnabled:function(b){if(typeof(navigator.cookieEnabled)!="undefined"){return navigator.cookieEnabled}var a=undefined;this.set("vw_cookie_check_enabled","check",86400,a,a,b);if(this.get("vw_cookie_check_enabled")!="check"){return false}this.remove("vw_cookie_check_enabled");return true}};vw.log=function(a){if(!vw._debug){return}if(vw.userAgent.opera){opera.postError(a)}else{if(window.console&&window.console.log){window.console.log(a)}else{alert(a)}}};vw.form={cursorMoveToEnd:function(b){if(b.tagName=="textarea"||b.type=="text"){if(b.createTextRange){var a=b.createTextRange();a.move("character",b.value.length);a.select()}else{if(b.setSelectionRange){b.setSelectionRange(b.value.length,b.value.length)}}}b.focus();return false}};jQuery.fn.extend({rewriteOptions:function(a,d){var e,c,b;return this.empty().each(function(){c=this;b=0;$.each(a,function(g,f){e=new Option(f,g);e.selected=(g==d);c.options[b++]=e})})},setChecked:function(a){this.filter(":checkbox").each(function(){this.checked=a});return this},positionTo:function(b,d){var c=isNaN(b)?(b.left-0):b;var a=isNaN(b)?(b.top-0):d;return this.css({left:c+"px",top:a+"px"})}});vw.util={max:function(b){var a;$.each(b,function(){if(a==undefined||this>=a){a=this}});return a},pageOffset:function(b){var a=0,c=0;b=$(b)[0];do{a+=b.offsetLeft||0;c+=b.offsetTop||0;b=b.offsetParent}while(b);return{left:a,top:c}},numberFormat:function(a){return isNaN(a)?a:String(a).replace(/([0-9]+?)(?=(?:[0-9]{3})+$)/g,"$1,")}};vw.selection=vw.jsClass.create({start:0,end:0,text:null,length:null,initialize:function(a){if(!a||(a.type!="textarea")){return false}else{if(!isNaN(a.selectionEnd)){this.start=a.selectionStart;this.end=a.selectionEnd}else{if(document.selection){this._ieGetSelection(a)}}}this.text=a.value.substring(this.start,this.end);this.length=this.end-this.start},_ieGetSelection:function(e,c){e.focus();var f=document.selection.createRange();var d=document.body.createTextRange();d.moveToElementText(e);var b=d.duplicate();b.setEndPoint("EndToStart",f);var h=d.duplicate();h.setEndPoint("EndToEnd",f);var a=b.text.length,g=h.text.length;if(a==g){while(e.value.charCodeAt(a)<=16){++a;++g}}else{while(e.value.charCodeAt(a)<=16){++a}}this.start=a;this.end=g}});
